{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../App.svelte",
    "../Editor.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport Editor from './Editor.svelte';\n\n  export let name;\n</script>\n\n<style>\n  h1 {\n    color: black;\n  }\n  .app {\n\t\theight:100%;\n  }\n  header {\n    height:3em;\n    line-height:2em;\n    text-align:center;\n    font-family:monospace;\n  }\n  .content {\n\t\theight:calc(100vh - 100px);\n  }\n\n@media (max-width: 800px) { \n  h1 {\n    font-size:1.2em;\n  }\n}\n\n</style>\n\n<div class=\"app\">\n  <header>\n    <h1>Shift-query interactive demo (<a href=\"https://github.com/jsoverson/shift-query\">Github</a>)</h1>\n  </header>\n  <main class=\"content\">\n\t<Editor></Editor>\n  </main>\n</div>\n",
    "<script>\n  import { onMount } from \"svelte\";\n  import CodeMirror from \"codemirror\";\n  import { highlightAll, removeHighlights } from \"./highlight.js\";\n  import codegen from \"shift-codegen\";\n  import defaultSample from \"./default-sample.js\";\n\n  import \"codemirror/mode/javascript/javascript\";\n  import \"../node_modules/codemirror/lib/codemirror.css\";\n\n  let cm = null;\n  let wrapper = null;\n  let results = [];\n  let resultIndex = -1;\n  let selectedMarker = null;\n\n  const worker = new Worker(\"./worker.js\");\n  worker.onmessage = function(e) {\n    results = e.data;\n    highlightAll(cm, e.data);\n  };\n\n  onMount(() => {\n    const textarea = document.getElementById(\"codemirror-textarea\");\n    textarea.value = defaultSample;\n\n    window.cm = cm = CodeMirror.fromTextArea(textarea, {\n      lineNumbers: true\n    });\n    wrapper = cm.getWrapperElement();\n\n    cm.setSize(\"auto\", \"100%\");\n    cm.on(\"change\", _ => {\n      results = [];\n      removeHighlights();\n      resetSelection();\n    });\n    cm.on(\"focus\", resetSelection);\n    go();\n  });\n\n  function go() {\n    const queryEl = document.getElementById(\"query\");\n    resetSelection();\n    if (cm) {\n      worker.postMessage({ source: cm.getValue(), query: queryEl.value });\n    }\n  }\n\n  function resetSelection() {\n    if (selectedMarker) {\n      selectedMarker.clear();\n    }\n    resultIndex = -1;\n    wrapper.classList.remove(\"selection-active\");\n  }\n\n  function select(index) {\n    resetSelection();\n    resultIndex = index;\n    const result = results[index];\n    const doc = cm.getDoc();\n    const loc = doc.posFromIndex(result.loc.start.offset);\n    const end = doc.posFromIndex(result.loc.end.offset);\n    doc.setCursor(loc);\n    wrapper.classList.add(\"selection-active\");\n    selectedMarker = doc.markText(loc, end, { className: `cm-nodeSelected` });\n  }\n\n  function formatCode(node) {\n    const src = codegen(node);\n    return src;\n  }\n\n  function autocomplete(evt) {\n    //someday\n  }\n</script>\n\n<style>\n  .editor {\n    height: 100%;\n    display:flex;\n  }\n\n  .editor > * {\n    width:50%;\n    height:100%;\n  }\n\n  @media (max-width: 800px) { \n    .editor {\n      flex-wrap: wrap;\n    }\n    .editor > * {\n      width:100%;\n      height:auto;\n    }\n    .query input {\n      font-size:1.2em;\n      height: 1.8em;\n      width:90%;\n    }\n    .query button {\n      display:none\n    }\n  }\n\n\n  .query {\n    background-color: hsl(200, 20%, 90%);\n    filter: drop-shadow(0 3px 5px #ccc);\n    position: relative;\n    z-index: 10;\n    height: 50px;\n    font-family: monospace;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  input {\n    font-family: monospace;\n    font-size: 16pt;\n    width: 80%;\n    height: 40px;\n    padding: 0 5px;\n    box-sizing: border-box;\n  }\n  button {\n    font-family: monospace;\n    font-size: 16pt;\n    line-height: 18pt;\n    height: 40px;\n    box-sizing: border-box;\n  }\n  .code {\n    height: calc(100% - 10px);\n  }\n  #results-list {\n    overflow-y: scroll;\n    border-left: 1px solid #ccc;\n  }\n  #results-list ol {\n    list-style-type: none;\n    margin: 5px;\n    padding: 0;\n  }\n  .result {\n    border: 1px solid #ccc;\n    margin: 5px 0;\n    cursor: pointer;\n    font-family: monospace;\n    padding: 0.2em 0.5em 0.6em 0.5em;\n  }\n  .result h1 {\n    font-size: 1em;\n  }\n  .selected {\n    background-color: rgb(154, 255, 253);\n    border-color: #64b3bb;\n  }\n  .source {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    max-width: 50em;\n  }\n  .json {\n    display:none;\n    overflow-y:scroll;\n    max-height:400px;\n    font-family:monospace;\n    word-wrap: none;\n  }\n\n  .selected .json {\n    display: block;\n  }\n</style>\n\n<form on:submit|preventDefault={go}>\n  <div class=\"query\">\n    <input\n      type=\"text\"\n      name=\"query\"\n      id=\"query\"\n      on:input={autocomplete}\n      value='FunctionBody, LiteralStringExpression, IdentifierExpression[name=\"Point\"]' />\n    <button id=\"submit\" on:click={go}>Go</button>\n  </div>\n</form>\n<div class=\"code\">\n  <div class=\"editor\">\n    <div>\n      <textarea id=\"codemirror-textarea\" />\n    </div>\n    <div id=\"results-list\">\n      <ol>\n        {#each results as result, i}\n          <li\n            data-index={i}\n            class=\"result {resultIndex === i ? 'selected' : ''}\"\n            on:click={_ => select(i)}>\n            <h1>\n              ({result.loc.start.line}:{result.loc.start.column}):{result.node.type}\n            </h1>\n            <div class=\"source\">{formatCode(result.node)}</div>\n            <pre class=\"json\">{JSON.stringify(result.node,null,2)}</pre>\n          </li>\n        {/each}\n      </ol>\n    </div>\n  </div>\n</div>\n"
  ],
  "names": [],
  "mappings": "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"
}